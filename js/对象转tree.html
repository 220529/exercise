<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    const industry_list = [{
      "parent_ind": "女装",
      "name": "连衣裙"
    }, {
      "name": "女装"
    }, {
      "parent_ind": "女装",
      "name": "半身裙"
    }, {
      "parent_ind": "女装",
      "name": "A字裙"
    }, {
      "name": "数码"
    }, {
      "parent_ind": "数码",
      "name": "电脑配件"
    }, {
      "parent_ind": "电脑配件",
      "name": "内存"
    }, {
      "parent_ind": "内存",
      "name": "内存的内存"
    }, {
      "parent_ind": "内存的内存",
      "name": "内存的内存的内存"
    }]

    // 为了取用方便， 我们希望可以将其转换为树状格式， 例如： {
    //   "数码": {
    //     "电脑配件": {
    //       "内存": {}
    //     }
    //   },
    //   "女装": {
    //     "连衣裙": {},
    //     "半身裙": {},
    //     "A字裙": {}
    //   }
    // }
    // 实现一个方法完成这个转换

    function _transform(target, children) {
      if (!children.length) {
        return
      }
      for (var i = 0; i < children.length; i++) {
        if (children[i].parent_ind in target) {
          target[children[i].parent_ind][children[i].name] = {}
          children.splice(i, 1)
          i--
        }
      }
      if (children.length) {
        Object.keys(target).forEach(key => {
          _transform(target[key], children)
        })
      }
    }

    function convert_format(data) {
      let _obj = {}
      let rootKeys = []
      let childKeys = []
      data.forEach(i => {
        i.parent_ind ? childKeys.push(i) : rootKeys.push(i)
      })
      rootKeys.forEach(root => {
        _obj[root.name] = {}
      })
      _transform(_obj, childKeys)
      return _obj
    }
    let _data = convert_format(industry_list)
    console.log("_data", _data)
  </script>
</body>

</html>