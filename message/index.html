<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
       * A 窗口的域名是<http://example.com:8080>，以下是 A 窗口的 script 标签下的代码：
       */

      // var popup = window.open(...popup)

      // 如果弹出框没有被阻止且加载完成

      // 这行语句没有发送信息出去，即使假设当前页面没有改变 location（因为 targetOrigin 设置不对）
      // popup.postMessage(
      //   "The user is 'bob' and the password is 'secret'",
      //   'https://secure.example.net'
      // )

      // 假设当前页面没有改变 location，这条语句会成功添加 message 到发送队列中去（targetOrigin 设置对了）
      // popup.postMessage('hello there!', 'http://example.com')

      function receiveMessage(event) {
        console.log('receiveMessage', event)
      }
      window.addEventListener('message', receiveMessage)
    </script>
  </body>
</html>
